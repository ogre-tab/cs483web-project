<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <link rel="stylesheet" href= "{{ url_for('static',filename='styles/results.css') }}">
        <title>Super Search: Results</title>
</head>
<body class ="grid-container">
    <!--<div class="grid-container">-->
    <div class="item1">
        <ul id="header">
            <li>Enhancements</li>
            <li>Mental Powers</li>
            <li>Personal Powers</li>
            <li>Mimicry</li>
            <li>Manipulations</li>
            <li>Almighty Powers</li>
            <li>
                <form method="get" action="{{ url_for('search') }}">
                    <input type="text" name="searchterm" value="{{ session.get('keywordquery',"") }}">
                    <button type="submit" value="Search">Submit</button>
                </form>
            </li>
        </ul>
    </div>
    <div class="item2"> 
        <table>
            <tbody>
                {% for power_name in results %}
                <tr>
                    <td><a onclick="getPowerView('{{power_name|safe}}')" href="javascript:void(0);">{{power_name|safe}}</a></td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    <div class=pagination>
    {% if pagination.has_prev %}
    <a href="{{ url_for_result_page(pagination.page - 1)
      }}">Prev &laquo;</a>
  {% endif %}
  {%- for page in pagination.iter_pages() %}
    {% if page %}
      {% if page != pagination.page %}
        <a href="{{ url_for_result_page(page) }}">{{ page }}</a>
      {% else %}
        <strong>{{ page }}</strong>
      {% endif %}
    {% else %}
      <span class=ellipsis>â€¦</span>
    {% endif %}
  {%- endfor %}
  {% if pagination.has_next %}
    <a href="{{ url_for_result_page(pagination.page + 1)
      }}">Next &raquo;</a>
  {% endif %}
  </div>
    </div>
    <div class="power_view" id="power-view">   
        <!-- MAIN POWER VIEW-->
        {{power_view|safe}}
    </div>
</body>
    <script type="text/javascript">
        //var power_name = "Telekinesis" /* example */
        /* accepts power name by exact title match or error */
        function getPowerView(power_name){
            var power_data
            var xmlhttp = new XMLHttpRequest();
            xmlhttp.onreadystatechange = function() {
                if (this.readyState == 4 && this.status == 200) {
                    power_data = this.responseText;
                    console.log("retrieved data for " + power_name);
                    //console.log(power_data)
                    document.getElementById("power-view").innerHTML = power_data;
                }
            };
            xmlhttp.open("GET", "power/"+power_name, true);
            xmlhttp.send();
        }
    </script>
</html>
